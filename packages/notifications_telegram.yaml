################################################################################
# /packages/notifications_telegram.yaml
################################################################################
#
# –≠—Ç–æ—Ç –ø–∞–∫–µ—Ç Home Assistant —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Telegram –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
# —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# –æ —Å–æ–±—ã—Ç–∏—è—Ö –≤ ¬´—É–º–Ω–æ–º –¥–æ–º–µ¬ª. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç:
#
# 1) –ù–∞—Å—Ç—Ä–æ–π–∫—É telegram_bot –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö notify-—Å–µ—Ä–≤–∏—Å–æ–≤ (master / Tatsiana).
# 2) Input_text –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –¥–æ–º–∞.
# 3) –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏:
#    ‚Ä¢ –ó–∞–ø—É—Å–∫–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–∏ Home Assistant.
#    ‚Ä¢ –û—Ç–∫—Ä—ã—Ç–∏–∏ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞.
#    ‚Ä¢ –ü—Ä–æ–≥–Ω–æ–∑–µ –ø–æ–≥–æ–¥—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.
#    ‚Ä¢ –ó–≤–æ–Ω–∫–µ –≤ –¥–≤–µ—Ä—å.
#    ‚Ä¢ –í–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã (–≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è/–¥–Ω–∏).
#    ‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å—Ç–∏—Ä–∫–∏.
#    ‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º CO2.
#    ‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è CO2.
#    ‚Ä¢ –ü–æ–Ω–∏–∂–µ–Ω–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤ –ø–æ–º–µ—â–µ–Ω–∏—è—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –¥–≤–µ—Ä–∏/–æ–∫–Ω–µ.
#    ‚Ä¢ –ù–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ –∑–∞—Ä—è–¥–∞ –±–∞—Ç–∞—Ä–µ–π –≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (—Å –ø–æ–º–æ—â—å—é blueprint).
#    ‚Ä¢ –î–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤/–ø–ª–∞–≥–∏–Ω–æ–≤.
#    ‚Ä¢ –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–º–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞ –≤ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–µ.
#
# –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø–∞–∫–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é, –ø–æ–∑–≤–æ–ª—è—é—â—É—é —Å–±—Ä–æ—Å–∏—Ç—å ¬´—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
# –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–º–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞¬ª –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑
# –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
#
################################################################################

telegram_bot:
  # ----------------------------------------------------------------------------
  # Telegram-–±–æ—Ç (polling).
  # –ó–¥–µ—Å—å –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º API-–∫–ª—é—á –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–∑—Ä–µ—à—ë–Ω –¥–æ—Å—Ç—É–ø
  # –∫ –±–æ—Ç—É —á–µ—Ä–µ–∑ chat_id. –ü–∞—Ä–∞–º–µ—Ç—Ä parse_mode: html –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
  # HTML-—Ä–∞–∑–º–µ—Ç–∫—É –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö (–∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç, —Å—Å—ã–ª–∫–∏ –∏ —Ç.–¥.).
  # ----------------------------------------------------------------------------
  - platform: polling
    api_key: !secret api_key_bot
    parse_mode: html
    allowed_chat_ids:
      - !secret chat_id_andrei
      - !secret chat_id_tatsiana

notify:
  # ----------------------------------------------------------------------------
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π.
  # notify.master   -> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram Andrei
  # notify.Tatsiana -> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram Tatiana
  # ----------------------------------------------------------------------------
  - name: master
    platform: telegram
    chat_id: !secret chat_id_andrei
  - name: Tatsiana
    platform: telegram
    chat_id: !secret chat_id_tatsiana

input_text:
  # ----------------------------------------------------------------------------
  # –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π,
  # –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –¥–æ–º–∞" —Ö—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ –∏–º–µ–Ω —Ç–µ—Ö, –∫—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¥–æ–º–∞.
  # ----------------------------------------------------------------------------
  currently_home:
    name: "Currently Home"
    min: 0
    max: 255

automation:
  # ----------------------------------------------------------------------------
  # 1) –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –¥–æ–º–∞
  # ----------------------------------------------------------------------------
  # –≠—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–ª–µ–¥–∏—Ç –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è person.master –∏ person.tatiana.
  # –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ—Ö ¬´–¥–æ–º–∞—à–Ω–∏—Ö¬ª –≤ input_text.currently_home.
  # –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö, –≥–¥–µ –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å,
  # –∫—Ç–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–∏–ª–∏ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ).
  - id: "c6382818-05ed-4590-be92-b367489fb0e1"
    alias: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –¥–æ–º–∞"
    description: "–û–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –¥–æ–º–∞, –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö."
    triggers:
      - trigger: state
        entity_id:
          - person.master
          - person.tatiana
    actions:
      - action: input_text.set_value
        target:
          entity_id: input_text.currently_home
        data:
          value: >
            {% set home_users = [] %}
            {% if is_state('person.master', 'home') %}
              {% set home_users = home_users + ['Andrei'] %}
            {% endif %}
            {% if is_state('person.tatiana', 'home') %}
              {% set home_users = home_users + ['Tatiana'] %}
            {% endif %}
            {{ home_users | join(', ') }}

  # ----------------------------------------------------------------------------
  # 2) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã
  # ----------------------------------------------------------------------------
  # –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã.
  # –¢—Ä–∏–≥–≥–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 07:45:00 (–∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ).
  # –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –ê–Ω–¥—Ä–µ—é (notify.master) –∏ –¢–∞—Ç—å—è–Ω–µ (notify.Tatsiana).
  # ----------------------------------------------------------------------------
  - id: "ac0837cf-9ecb-413b-96fb-89552934212d"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã"
    description: "–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –≤ –¢–µ–ª–µ–≥—Ä–∞–º –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ."
    triggers:
      - trigger: time
        at: "07:45:00"
    actions:
      - action: notify.master
        data:
          title: "<b>–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</b>"
          message: >
            –°–µ–π—á–∞—Å {{ states('sensor.open_meteo_opisanie_na_russkom') }}. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {{ state_attr('weather.kvartira_133', 'temperature') }}¬∞C. –í–µ—Ç–µ—Ä {{ states('sensor.open_meteo_weather4notion_wind') }}, {{ state_attr('weather.kvartira_133', 'wind_speed') }} –º/—Å. {% if state_attr('weather.kvartira_133', 'precipitation_unit') == 'mm' %}–û–∂–∏–¥–∞—é—Ç—Å—è –æ—Å–∞–¥–∫–∏.{% else %}–û—Å–∞–¥–∫–æ–≤ –Ω–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è.{% endif %}
      - action: notify.tatsiana
        data:
          title: "<b>–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</b>"
          message: >
            –°–µ–π—á–∞—Å {{ states('sensor.open_meteo_opisanie_na_russkom') }}. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {{ state_attr('weather.kvartira_133', 'temperature') }}¬∞C. –í–µ—Ç–µ—Ä {{ state_attr('weather.kvartira_133', 'wind_speed') }} –º/—Å, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ {{ states('sensor.open_meteo_weather4notion_wind') }}. {% if state_attr('weather.kvartira_133', 'precipitation_unit') == 'mm' %}–û–∂–∏–¥–∞—é—Ç—Å—è –æ—Å–∞–¥–∫–∏.{% else %}–û—Å–∞–¥–∫–æ–≤ –Ω–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è.{% endif %}
    mode: single

  # ----------------------------------------------------------------------------
  # 3) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –û—Ç–∫—Ä—ã—Ç–∏–µ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏
  # ----------------------------------------------------------------------------
  # –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ê–Ω–¥—Ä–µ—é (notify.master), –µ—Å–ª–∏ –¥–≤–µ—Ä—å
  # –æ—Ç–∫—Ä—ã–ª–∞—Å—å, –∞ –æ–Ω (master) –Ω–µ –¥–æ–º–∞. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∏–≥–Ω–∞–ª–æ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ
  # –ø—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∏–ª–∏ –∫–æ–≥–æ-—Ç–æ –¥—Ä—É–≥–æ–≥–æ, –∫—Ç–æ –ø—Ä–∏—à—ë–ª –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞.
  # ----------------------------------------------------------------------------
  - id: "1f7e3ae4-268e-4afa-a7e6-d395821f244b"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –û—Ç–∫—Ä—ã—Ç–∏–µ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏"
    description: "–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–≤–µ—Ä–∏"
    triggers:
      - trigger: device
        device_id: abd3e40b49cfbe61411bac5d87bf000f
        entity_id: binary_sensor.hallway_door_contact
        domain: binary_sensor
        type: opened
    conditions:
      - condition: state
        entity_id: person.master
        state: "not_home"
    actions:
      - action: notify.master
        data:
          message: "‚ö†Ô∏è –û—Ç–∫—Ä—ã—Ç–∏–µ –≤—Ö–æ–¥–Ω–æ–π –¥–≤–µ—Ä–∏! üîì"
    mode: single

  # ----------------------------------------------------------------------------
  # 4) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ó–≤–æ–Ω–æ–∫ –≤ –¥–≤–µ—Ä—å
  # ----------------------------------------------------------------------------
  # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É, –Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è —Å–∏–≥–Ω–∞–ª –æ –∑–≤–æ–Ω–∫–µ
  # (MQTT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ). –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ê–Ω–¥—Ä–µ—é, –µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä –Ω–µ –¥–æ–º–∞.
  # ----------------------------------------------------------------------------
  - id: "857652d8-a81f-4297-bf5a-824030aca70a"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–≤–æ–Ω–∫–µ –≤ –¥–≤–µ—Ä—å"
    triggers:
      - trigger: device
        domain: mqtt
        device_id: d2c3001cdc59660c456de45aec09da91
        type: action
        subtype: single
    conditions:
      - condition: state
        entity_id: person.master
        state: "not_home"
    actions:
      - action: notify.master
        data:
          message: "‚ö†Ô∏è –ö—Ç–æ-—Ç–æ –∑–≤–æ–Ω–∏—Ç –≤ –¥–≤–µ—Ä—å"
    mode: single

  # ----------------------------------------------------------------------------
  # 5) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã (–ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é)
  # ----------------------------------------------------------------------------
  # –î–∞–Ω–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–∞–º–µ—Ä—ã (switch.chuangmi_ipc019_37da_switch_status).
  # –£—Å–ª–æ–≤–∏—è:
  #   - –ü–Ω‚Äì–ü—Ç: 09:00:00 ‚Äì 02:00:00 (–≤–∏–¥–Ω–æ, —á—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ç–∞–∫–æ–≤, —á—Ç–æ–±—ã
  #     ¬´–∑–∞—Ö–≤–∞—Ç–∏—Ç—å¬ª –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –¥–Ω—è? –ù—É–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ "before: 02:00:00"
  #     —Ñ–æ—Ä–º–∞–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–æ—á—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è).
  #   - –°–±‚Äì–í—Å: 00:00:00 ‚Äì 23:59:59 (—Ç.–µ. –≤—ã—Ö–æ–¥–Ω—ã–µ –∫–æ–≥–¥–∞ —É–≥–æ–¥–Ω–æ).
  # –í—ã–±–∏—Ä–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º (messages | random).
  # ----------------------------------------------------------------------------
  - id: "417016e0-21fa-4ec3-a057-35deaa7a93f2"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã"
    triggers:
      - trigger: state
        entity_id: switch.chuangmi_ipc019_37da_switch_status
        to: "on"
    conditions:
      - condition: or
        conditions:
          - condition: time
            weekday:
              - mon
              - tue
              - wed
              - thu
              - fri
            after: "09:00:00"
            before: "02:00:00"
          - condition: time
            weekday:
              - sat
              - sun
            after: "00:00:00"
            before: "23:59:59"
    actions:
      - choose:
          conditions:
            - condition: template
              value_template: "{{ now().weekday() in [5, 6] }}"
          sequence:
            - action: notify.master
              data:
                message: >
                  {% set messages = [
                    "‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ö–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞! üé•",
                    "‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ö–∞–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞! üé•",
                    "‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ö–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç! üé•"
                  ] %}
                  {{ messages | random }}
    mode: single

  # ----------------------------------------------------------------------------
  # 6) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å—Ç–∏—Ä–∫–∏
  # ----------------------------------------------------------------------------
  # –¢—Ä–∏–≥–≥–µ—Ä ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–π –¥–∞—Ç—á–∏–∫ (binary_sensor.washing_machine_finished).
  # –°–æ—Å—Ç–æ—è–Ω–∏–µ "on" –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç –∏ –ø—Ä–∏ —ç—Ç–æ–º sensor.washing_machine_active
  # == off, –ø–ª—é—Å –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —à—Ç–∞–º–ø–æ–≤–æ–º—É, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–æ–∂–Ω—ã—Ö
  # —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π. –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (master), —á—Ç–æ —Å—Ç–∏—Ä–∫–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.
  # ----------------------------------------------------------------------------
  # --------------------------------------------------------------------------
  # –£–í–ï–î–û–ú–õ–ï–ù–ò–ï –û –ó–ê–í–ï–†–®–ï–ù–ò–ò –°–¢–ò–†–ö–ò (–Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–æ –≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞)
  # --------------------------------------------------------------------------
  #      –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å—Ç–∏—Ä–∫–∏ (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ)
  #    - –î–æ–±–∞–≤–∏–ª–∏ condition: system_startup_phase == off (—á—Ç–æ–±—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ).
  #    - –ï—â—ë –æ–¥–Ω–∞ condition: washing_machine_pre_restart_state == off, —á—Ç–æ–±—ã –µ—Å–ª–∏
  #      –º–∞—à–∏–Ω–∞ ¬´—è–∫–æ–±—ã¬ª –±—ã–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ø—Ä—è–º–æ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ ‚Äî –Ω–µ –≤—ã–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  #      –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ.
  # ----------------------------------------------------------------------------
  - id: "ba69e825-6c4e-4451-bb6f-cbbb224b1631"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å—Ç–∏—Ä–∫–∏ (Telegram)"
    trigger:
      - platform: state
        entity_id: binary_sensor.washing_machine_finished
        to: "on"
        for:
          minutes: 5   # –∂–¥–µ–º 5 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ BINARY_SENSOR –ø–µ—Ä–µ—à–µ–ª –≤ on
    condition:
      # a) –ù–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤ —Ñ–∞–∑–µ –∑–∞–≥—Ä—É–∑–∫–∏
      - condition: state
        entity_id: input_boolean.system_startup_phase
        state: "off"

      # b) –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º–∞—à–∏–Ω–∞ –Ω–µ –±—ã–ª–∞ ¬´—É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞¬ª –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
      - condition: state
        entity_id: input_boolean.washing_machine_pre_restart_state
        state: "off"

      # c) –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å–∞–º–∞ –º–∞—à–∏–Ω–∞ —É–∂–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
      #    –ó–¥–µ—Å—å –º–µ–Ω—è–µ–º sensor.washing_machine_active ‚Üí binary_sensor.washing_machine_active
      - condition: state
        entity_id: binary_sensor.washing_machine_active
        state: "off"

      # d) –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å—Ç–∏—Ä–∞–ª–∫–∞ –±—ã–ª–∞ ¬´on¬ª –Ω–µ –º–µ–Ω–µ–µ 14 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥
      #    –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –º–µ–Ω—è–µ–º states.sensor.washing_machine_active ‚Üí states.binary_sensor.washing_machine_active
      - condition: template
        value_template: >
          {{ is_state('binary_sensor.washing_machine_active','on') and
            (as_timestamp(now()) -
              as_timestamp(states.binary_sensor.washing_machine_active.last_changed)) >= 840 }}
    action:
      - service: notify.master
        data:
          message: "üè† –°—Ç–∏—Ä–∫–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–∞! üßº"

  # ----------------------------------------------------------------------------
  # 7) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
  # ----------------------------------------------------------------------------
  # –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ Home Assistant (event: start) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ
  # —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –∏ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É (ha_wakeup.png).
  # ----------------------------------------------------------------------------
  - id: "686a3440-7629-4b55-b508-593caf3679af"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω"
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞"
    triggers:
      - trigger: homeassistant
        event: start
    actions:
      - action: notify.master
        data:
          message: >
            {{ ["Home assistant started!", "Home assistant is running now!", "Home assistant has begun!", "HA has started!"] | random }}
          data:
            photo:
              - file: "/config/www/images/notify_alert/ha_wakeup.png"
                caption: "{{ ['Home assistant started!', 'Home assistant is running now!', 'Home assistant has begun!', 'HA has started!'] | random }}"
    mode: single

  # ----------------------------------------------------------------------------
  # 8) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –°–µ—Ä–≤–µ—Ä –æ—Ç–∫–ª—é—á—ë–Ω
  # ----------------------------------------------------------------------------
  # –ü—Ä–∏ —Å–∏–≥–Ω–∞–ª–µ "shutdown" Home Assistant –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä
  # –æ—Ç–∫–ª—é—á–µ–Ω, –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É (ha_shutdown.png).
  # ----------------------------------------------------------------------------
  - id: "c8dc47aa-90f0-4522-b71e-4e99bbfe6c76"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –°–µ—Ä–≤–µ—Ä –æ—Ç–∫–ª—é—á—ë–Ω"
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞"
    triggers:
      - trigger: homeassistant
        event: shutdown
    actions:
      - action: notify.master
        data:
          message: >
            {{ ['Home Assistant shutdown', 'Shutdown of Home Assistant', 'HA has been shut down'] | random }}
          data:
            photo:
              - file: "/config/www/images/notify_alert/ha_shutdown.png"
                caption: "{{ ['Home Assistant shutdown', 'Shutdown of Home Assistant', 'HA has been shut down'] | random }}"
    mode: single

  # ----------------------------------------------------------------------------
  # 9) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å –≥–æ—Å—Ç–∏–Ω—É—é (CO2)
  # ----------------------------------------------------------------------------
  # –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ sensor.livingroom_ventilation_need –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è —Å 'off' –Ω–∞ 'on'.
  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ:
  #   - silent_mode == off
  #   - co2_text_notification_sensor == off (–µ—â—ë –Ω–µ —É–≤–µ–¥–æ–º–ª—è–ª–∏)
  #   - system_startup_phase == off (—Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–∞).
  #
  # –î–∞–ª–µ–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ (master/tatiana). –ï—Å–ª–∏ –æ–Ω–∏ –Ω–µ –¥–æ–º–∞,
  # –æ—Ç—Å—ã–ª–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–∞—Ä—Ç–∏–Ω–∫—É —Å–æ –∑–Ω–∞—á–∫–æ–º ¬´–ø–æ—Ä–∞ –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å¬ª.
  # –í –∫–æ–Ω—Ü–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ–º —Ñ–ª–∞–≥ co2_text_notification_sensor == on, —á—Ç–æ–±—ã
  # –Ω–µ –∑–∞—Å–ø–∞–º–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.
  # ----------------------------------------------------------------------------
  - id: "dca1ab9b-889a-4d29-9376-558f2d8e3cfd"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å –≥–æ—Å—Ç–∏–Ω—É—é"
    description: "–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏—è, –µ—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å CO2 –≤—ã—Å–æ–∫."
    triggers:
      - trigger: state
        entity_id: sensor.livingroom_ventilation_need
        from: "off"
        to: "on"
    conditions:
      - condition: state
        entity_id: input_boolean.silent_mode
        state: "off"
      - condition: state
        entity_id: input_boolean.co2_text_notification_sensor
        state: "off"
      - condition: state
        entity_id: input_boolean.system_startup_phase
        state: "off"
    actions:
      - condition: state
        entity_id: person.master
        state: "not_home"
      - action: notify.master
        data:
          message: "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–µ –≥–æ—Å—Ç–∏–Ω—É—é"
          photo:
            file: "/config/www/images/notify_alert/ha_co2_alert.png"
            caption: "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–µ"
      - condition: state
        entity_id: person.tatiana
        state: "not_home"
      - action: notify.tatsiana
        data:
          message: "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–µ –≥–æ—Å—Ç–∏–Ω—É—é"
          photo:
            file: "/config/www/images/notify_alert/ha_co2_alert.png"
            caption: "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–µ –≥–æ—Å—Ç–∏–Ω—É—é"
      - action: input_boolean.turn_on
        entity_id: input_boolean.co2_text_notification_sensor
    mode: single

  # ----------------------------------------------------------------------------
  # 10) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ –≥–æ—Å—Ç–∏–Ω–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ (CO2 –≤–µ—Ä–Ω—É–ª—Å—è –≤ –Ω–æ—Ä–º—É)
  # ----------------------------------------------------------------------------
  # –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ sensor.livingroom_ventilation_status –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç
  # –∏–∑ 'off' –≤ 'on'. –£—Å–ª–æ–≤–∏—è:
  #   - silent_mode == off
  #   - co2_text_notification_sensor == off (–µ—â—ë –Ω–µ —É–≤–µ–¥–æ–º–ª—è–ª–∏)
  #   - system_startup_phase == off
  #   - –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ not_home (group.all_residents).
  #
  # –î–∞–ª–µ–µ –∂–¥—ë–º, –∫–æ–≥–¥–∞ —ç—Ç–æ—Ç –¥–∞—Ç—á–∏–∫ —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–µ—Ç 'off' (wait_for_trigger), —á—Ç–æ–±—ã
  # –¥–æ–∂–¥–∞—Ç—å—Å—è, –∫–æ–≥–¥–∞ CO2 –æ–ø—è—Ç—å –≤—ã–π–¥–µ—Ç –∑–∞ —Ä–∞–º–∫–∏ ¬´–Ω–æ—Ä–º—ã¬ª –∏–ª–∏ —á—Ç–æ–±—ã —Å–æ–±–ª—é—Å—Ç–∏
  # –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏—è. –ü–æ –≤–æ–∑–≤—Ä–∞—Ç—É –ø—Ä–æ–≤–µ—Ä—è–µ–º, –∫—Ç–æ –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  # –¥–æ–º–∞, –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Ç–æ–º—É, –∫—Ç–æ –¥–æ–º–∞. –ü–æ–¥ –∫–æ–Ω–µ—Ü —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
  # ventilation_status_cool_down = on (–ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º ¬´–ø—Ä–æ–≤–µ—Ç—Ä–µ–Ω–æ¬ª) –∏ –ø–æ–º–µ—á–∞–µ–º,
  # —á—Ç–æ co2_text_notification_sensor —Ç–µ–ø–µ—Ä—å ¬´—É–≤–µ–¥–æ–º–ª—ë–Ω¬ª.
  # ----------------------------------------------------------------------------
  - id: "e531db4f-e947-460b-a9b3-2d71648bc465"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ –≤ –≥–æ—Å—Ç–∏–Ω–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
    triggers:
      - trigger: state
        entity_id: sensor.livingroom_ventilation_status
        from: "off"
        to: "on"
    conditions:
      - condition: state
        entity_id: input_boolean.silent_mode
        state: "off"
      - condition: state
        entity_id: input_boolean.co2_text_notification_sensor
        state: "off"
      - condition: state
        entity_id: input_boolean.system_startup_phase
        state: "off"
      - condition: template
        value_template: >
          {{ is_state('group.all_residents', 'not_home') }}
    actions:
      - wait_for_trigger:
          - trigger: state
            entity_id: sensor.livingroom_ventilation_status
            to: "off"
        continue_on_timeout: true
      - choose:
          conditions:
            - condition: state
              entity_id: person.master
              state: "home"
          sequence:
            - action: notify.master
              data:
                message: "–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –£—Ä–æ–≤–µ–Ω—å CO2 –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã."
          conditions:
            - condition: state
              entity_id: person.tatiana
              state: "home"
          sequence:
            - action: notify.tatsiana
              data:
                message: "–ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –£—Ä–æ–≤–µ–Ω—å CO2 –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã."
      - action: input_boolean.turn_on
        entity_id: input_boolean.ventilation_status_cool_down
      - action: input_boolean.turn_on
        entity_id: input_boolean.co2_text_notification_sensor
    mode: single

  # ----------------------------------------------------------------------------
  # 11) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ —Å–ø–∞–ª—å–Ω–µ –Ω–∏–∂–µ 20¬∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –¥–≤–µ—Ä–∏/–æ–∫–Ω–µ
  # ----------------------------------------------------------------------------
  # –¢—Ä–∏–≥–≥–µ—Ä: sensor.bedroom_th_sensor_temperature < 20.
  # –£—Å–ª–æ–≤–∏—è:
  #   - system_startup_phase == off
  #   - –î–≤–µ—Ä—å/–æ–∫–Ω–æ (binary_sensor.0x00158d00044d5d11_contact) == on (–æ—Ç–∫—Ä—ã—Ç–æ).
  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫—Ç–æ –¥–æ–º–∞. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
  # ----------------------------------------------------------------------------
  - id: "c694ab76-109b-4199-ae0b-e56753b80ae0"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ —Å–ø–∞–ª—å–Ω–µ –Ω–∏–∂–µ 20¬∞"
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –≤ —Å–ø–∞–ª—å–Ω–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∏–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞"
    triggers:
      - trigger: numeric_state
        entity_id: sensor.bedroom_th_sensor_temperature
        below: 20
    conditions:
      - condition: state
        entity_id: input_boolean.system_startup_phase
        state: "off"
      - condition: state
        entity_id: binary_sensor.0x00158d00044d5d11_contact
        state: "on"
    actions:
      - condition: state
        entity_id: person.master
        state: "home"
      - action: notify.master
        data:
          message: "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ —Å–ø–∞–ª—å–Ω–µ –Ω–∏–∂–µ 20¬∞. –î–∏–Ω–æ–∑–∞–≤—Ä—ã –ª—é–±—è—Ç —Ç–µ–ø–ª–æ! –ó–∞–∫—Ä–æ–π—Ç–µ –±–∞–ª–∫–æ–Ω –≤ —Å–ø–∞–ª—å–Ω–µ."
      - condition: state
        entity_id: person.tatiana
        state: "home"
      - action: notify.tatsiana
        data:
          message: "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ —Å–ø–∞–ª—å–Ω–µ –Ω–∏–∂–µ 20¬∞. –î–∏–Ω–æ–∑–∞–≤—Ä—ã –ª—é–±—è—Ç —Ç–µ–ø–ª–æ! –ó–∞–∫—Ä–æ–π—Ç–µ –±–∞–ª–∫–æ–Ω –≤ —Å–ø–∞–ª—å–Ω–µ."
    mode: single

  # ----------------------------------------------------------------------------
  # 12) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π –Ω–∏–∂–µ 20¬∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –¥–≤–µ—Ä–∏/–æ–∫–Ω–µ
  # ----------------------------------------------------------------------------
  # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (11), –Ω–æ –¥–ª—è –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π.
  # ----------------------------------------------------------------------------
  - id: "6d6b608d-26d9-4eb7-8a52-7163a91ed890"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π –Ω–∏–∂–µ 20¬∞"
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∏–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞"
    triggers:
      - trigger: numeric_state
        entity_id: sensor.cgllc_dove_f637_temperature_humidity_sensor
        below: 20
    conditions:
      - condition: state
        entity_id: input_boolean.system_startup_phase
        state: "off"
      - condition: state
        entity_id: binary_sensor.masterskaia_balkon_contact
        state: "on"
    actions:
      - condition: state
        entity_id: person.master
        state: "home"
      - action: notify.master
        data:
          message: "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π –Ω–∏–∂–µ 20¬∞. –≠—Ç–æ –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è, –∞ –Ω–µ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫! –ó–∞–∫—Ä–æ–π—Ç–µ –¥–≤–µ—Ä—å."
      - condition: state
        entity_id: person.tatiana
        state: "home"
      - action: notify.tatsiana
        data:
          message: "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π –Ω–∏–∂–µ 20¬∞. –≠—Ç–æ –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è, –∞ –Ω–µ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫! –ó–∞–∫—Ä–æ–π—Ç–µ –¥–≤–µ—Ä—å."
    mode: single

  # ----------------------------------------------------------------------------
  # 13) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –ø–∏—Ç–∞–Ω–∏—è (—á–µ—Ä–µ–∑ Blueprint)
  # ----------------------------------------------------------------------------
  # –í–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –≥–æ—Ç–æ–≤—ã–º –±–ª—É–ø—Ä–∏–Ω—Ç–æ–º (sbyx/low-battery-level-detection-notification).
  # –ü–æ—Ä–æ–≥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 15%. –ü—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ notify.master,
  # —É–ø–æ–º–∏–Ω–∞—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –±–∞—Ç–∞—Ä–µ—è —É–ø–∞–ª–∞ –Ω–∏–∂–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞.
  # ----------------------------------------------------------------------------
  - id: "04c57ac3-56ec-49aa-a30a-4b3bd973eb60"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –ø–∏—Ç–∞–Ω–∏—è"
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–º–µ–Ω—ã —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–∏—Ç–∞–Ω–∏—è"
    use_blueprint:
      path: sbyx/low-battery-level-detection-notification-for-all-battery-sensors.yaml
      input:
        threshold: 15
        actions:
          - action: notify.master
            metadata: {}
            data:
              message: '"–ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∑–∞–º–µ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–∏—Ç–∞–Ω–∏—è: {{sensors}}"'

  # ----------------------------------------------------------------------------
  # 14) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞/–ø–ª–∞–≥–∏–Ω–∞
  # ----------------------------------------------------------------------------
  # –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ –ª—é–±–æ–π –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö update.*_update –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ 'on'.
  # –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –ø–µ—Ä–µ—á–∏—Å–ª—è—è –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —Ç–µ–∫—É—â—É—é –∏ –ø–æ—Å–ª–µ–¥–Ω—é—é –¥–æ—Å—Ç—É–ø–Ω—É—é
  # –≤–µ—Ä—Å–∏—é. –¢–∞–∫–∂–µ –ø—Ä–∏–ª–∞–≥–∞–µ—Ç—Å—è release_summary, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –∞—Ç—Ä–∏–±—É—Ç–∞—Ö.
  # ----------------------------------------------------------------------------
  - id: "4c5c8e57-be5b-4380-88a1-4ecc730c19da"
    alias: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –¢–µ–ª–µ–≥—Ä–∞–º: –í–æ–∑–º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã"
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–∏—Å—Ç–µ–º—ã"
    triggers:
      - trigger: state
        entity_id:
          - update.file_editor_update
          - update.home_assistant_core_update
          - update.home_assistant_google_drive_backup_update
          - update.home_assistant_operating_system_update
          - update.home_assistant_supervisor_update
          - update.log_viewer_update
          - update.mosquitto_broker_update
          - update.samba_share_update
          - update.studio_code_server_update
          - update.terminal_ssh_update
          - update.zigbee2mqtt_update
        to: "on"
    actions:
      - action: notify.master
        data_template:
          message: >
            {% set entity = trigger.to_state %}
            {% if entity %}
              üÜï –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ: {{ entity.attributes.friendly_name | default('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç') }}
              –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: {{ entity.attributes.installed_version | default('–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ') }}
              –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è: {{ entity.attributes.latest_version | default('–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ') }}
              üìù –°–≤–æ–¥–∫–∞: {{ entity.attributes.release_summary | default('–ù–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π') }}
            {% else %}
              –û—à–∏–±–∫–∞: –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.
            {% endif %}

  # ----------------------------------------------------------------------------
  # 15) –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä (–∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä)
  # ----------------------------------------------------------------------------
  # –ï—Å–ª–∏ sensor.konditsioner_filter_remaining_life –æ–ø—É—Å—Ç–∏–ª—Å—è –Ω–∏–∂–µ 10% –Ω–∞ 1 –º–∏–Ω—É—Ç—É,
  # –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ silent_mode == off, system_startup_phase == off –∏ —É –Ω–∞—Å –µ—â—ë
  # –Ω–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ filter_replace_notified, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ–º
  # –¥–∞–Ω–Ω—ã–π —Ñ–ª–∞–≥ –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–æ–≤.
  # ----------------------------------------------------------------------------
  - id: "1712827987955"
    alias: "–¢–µ–ª–µ–≥—Ä–∞–º. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä"
    description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–º–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞"
    triggers:
      - platform: numeric_state
        entity_id: sensor.konditsioner_filter_remaining_life
        below: 10
        for:
          minutes: 1
    conditions:
      - condition: state
        entity_id: input_boolean.system_startup_phase
        state: "off"
      - condition: state
        entity_id: input_boolean.silent_mode
        state: "off"
      - condition: state
        entity_id: input_boolean.filter_replace_notified
        state: "off"
    actions:
      - service: notify.master
        data:
          message: "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–µ"
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.filter_replace_notified
    mode: single

  # ----------------------------------------------------------------------------
  # 16) –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞
  # ----------------------------------------------------------------------------
  # –ï—Å–ª–∏ sensor.konditsioner_filter_remaining_life —Å–Ω–æ–≤–∞ –ø–æ–¥–Ω—è–ª—Å—è –≤—ã—à–µ 10%,
  # –ø–æ –ø—Ä–æ—à–µ—Å—Ç–≤–∏–∏ 1 –º–∏–Ω—É—Ç—ã, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ filter_replace_notified –≤ off.
  # ----------------------------------------------------------------------------
  - id: "reset_filter_replace_notified"
    alias: "–°–±—Ä–æ—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–∞"
    description: "–°–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä–∞"
    triggers:
      - platform: numeric_state
        entity_id: sensor.konditsioner_filter_remaining_life
        above: 10
        for:
          minutes: 1
    actions:
      - service: input_boolean.turn_off
        target:
          entity_id: input_boolean.filter_replace_notified
    mode: single