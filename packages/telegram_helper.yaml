################################################################################
# /packages/telegram_helper.yaml
################################################################################
#
# Этот пакет Home Assistant реализует интеграцию с Telegram для отправки
# различных уведомлений, обеспечивая мгновенное оповещение пользователей
# о событиях в «умном доме». Он включает:
#
# 1) Настройку telegram_bot и соответствующих notify-сервисов (master / Tatiana).
# 2) Input_text для хранения списка пользователей, находящихся дома.
#
################################################################################

telegram_bot:
  # ----------------------------------------------------------------------------
  # Telegram-бот (polling).
  # Здесь мы указываем API-ключ и список пользователей, которым разрешён доступ
  # к боту через chat_id. Параметр parse_mode: html позволяет использовать
  # HTML-разметку в уведомлениях (жирный шрифт, ссылки и т.д.).
  # ----------------------------------------------------------------------------

  - platform: polling
    api_key: !secret api_key_bot
    parse_mode: html
    allowed_chat_ids:
      - !secret chat_id_andrei
#      - !secret chat_id_tatiana

notify:
  # ----------------------------------------------------------------------------
  # Настройки сервисов уведомлений для конкретных получателей.
  # notify.master   -> отправляет сообщения в Telegram Andrei
  # notify.tatiana -> отправляет сообщения в Telegram Tatiana
  # group_notifications -> группа для отправки для уведомлений обоим пользователям
  # ----------------------------------------------------------------------------

  - name: master
    platform: telegram
    chat_id: !secret chat_id_andrei
  # - name: tatiana
  #   platform: telegram
  #   chat_id: !secret chat_id_tatiana
  - platform: group
    name: group_notifications
    services:
      - service: master
#      - service: tatiana
